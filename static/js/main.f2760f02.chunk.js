(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},17:function(e,t,n){e.exports=n.p+"static/media/testpic.23efb93b.jpg"},20:function(e,t,n){e.exports=n(46)},25:function(e,t,n){},28:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(14),o=n.n(a),s=(n(25),n(2)),c=n(3),l=n(5),u=n(4),h=n(6),p=n(15),d=n(16),m=n.n(d),f=n(17),v=n.n(f),g=(n(28),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n._resetFileInput=function(){n.fileInput.current&&(n.fileInput.current.value="")},n._onButtonClick=function(){n.fileInput.current&&n.fileInput.current.click()},n._onFileChange=function(e){var t=e.target,i=t.files&&t.files[0];i&&(n._resetFileInput(),n.props.onFile(i))},n._onDemoClick=function(){console.log(v.a)},n.fileInput=Object(i.createRef)(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"intro"},r.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",{className:"open-image-guide"},r.a.createElement("span",null," Drag & drop or")," ",r.a.createElement("button",{className:"select-button",onClick:this._onButtonClick},"select an image"),r.a.createElement("input",{ref:this.fileInput,style:{display:"none"},type:"file",accept:"image/*",onChange:this._onFileChange})))}}]),t}(r.a.Component)),b=n(7),w=n.n(b),_=n(19),y=n(8),S=n(30),E="Copy to clipboard: #{key}, Enter";function x(e,t){var n,i,r,a,o,s,c=!1;t||(t={}),n=t.debug||!1;try{if(r=S(),a=document.createRange(),o=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",document.body.appendChild(s),a.selectNode(s),o.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(l){n&&console.error("unable to copy using execCommand: ",l),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),c=!0}catch(l){n&&console.error("unable to copy using clipboardData: ",l),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:E),window.prompt(i,e)}}finally{o&&("function"==typeof o.removeRange?o.removeRange(a):o.removeAllRanges()),s&&document.body.removeChild(s),r()}return c}function k(e,t){var n=e.getContext("2d");if(!n)throw Error("Canvas not initialized");n.clearRect(0,0,e.width,e.height),n.putImageData(t,0,0)}function O(e){return j.apply(this,arguments)}function j(){return(j=Object(y.a)(w.a.mark(function e(t){var n,i;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new Image).decoding="async",n.src=t,i=new Promise(function(e,t){n.onload=function(){return e()},n.onerror=function(){return t(Error("Image loading error"))}}),!n.decode){e.next=7;break}return e.next=7,n.decode().catch(function(){return null});case 7:return e.next=9,i;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return P.apply(this,arguments)}function P(){return(P=Object(y.a)(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=URL.createObjectURL(t),e.prev=1,e.next=4,O(n);case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,URL.revokeObjectURL(n),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[1,,5,8]])}))).apply(this,arguments)}function H(e){return new Response(e).text()}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width,i=void 0===n?e.width:n,r=t.height,a=void 0===r?e.height:r,o=t.sx,s=void 0===o?0:o,c=t.sy,l=void 0===c?0:c,u=t.sw,h=void 0===u?e.width:u,p=t.sh,d=void 0===p?e.height:p,m=document.createElement("canvas");m.width=i,m.height=a;var f=m.getContext("2d");if(!f)throw new Error("Could not create canvas context");return f.drawImage(e,s,l,h,d,0,0,i,a),f.getImageData(0,0,i,a)}function M(e){return N.apply(this,arguments)}function N(){return(N=Object(y.a)(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("createImageBitmap"in self)){e.next=6;break}return e.next=3,createImageBitmap(t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,C(t);case 8:e.t0=e.sent;case 9:return n=e.t0,e.abrupt("return",V(n));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var R=n(18),D=n.n(R),I=n(11),z=(n(41),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={orientation:""},n._positionH=0,n._relativePositionH=.5,n._positionOnPointerStartH=0,n._positionHS=0,n._relativePositionHS=.75,n._positionOnPointerStartHS=0,n._positionV=0,n._relativePositionV=.5,n._positionOnPointerStartV=0,n._positionVS=0,n._relativePositionVS=.75,n._positionOnPointerStartVS=0,n._setHorizontal=function(){n.horizontal.current&&(n.horizontal.current.style.transform="translateY(".concat(n._positionH,"px)"),n.props.setY&&n.props.setY(n._positionH))},n._setHorizontalScrubber=function(){n.scrubber1.current&&(n.scrubber1.current.style.transform="translate(".concat(n._positionHS,"px, -50%)"))},n._setVertical=function(){n.vertical.current&&(n.vertical.current.style.transform="translateX(".concat(n._positionV,"px)"),n.props.setX&&n.props.setX(n._positionV))},n._setVerticalScrubber=function(){n.scrubber2.current&&(n.scrubber2.current.style.transform="translate(-50%, ".concat(n._positionVS,"px)"))},n.container=Object(i.createRef)(),n.horizontal=Object(i.createRef)(),n.vertical=Object(i.createRef)(),n.scrubber1=Object(i.createRef)(),n.scrubber2=Object(i.createRef)(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.scrubber1.current,n=this.scrubber2.current,i=new I.a(t,{start:function(t,n){return 1!==i.currentPointers.length&&(n.preventDefault(),e._positionOnPointerStartH=e._positionH,e._positionOnPointerStartHS=e._positionHS,!0)},move:function(){e._pointerChangeH(i.startPointers[0],i.currentPointers[0])}}),r=new I.a(n,{start:function(t,n){return 1!==r.currentPointers.length&&(n.preventDefault(),e._positionOnPointerStartV=e._positionV,e._positionOnPointerStartVS=e._positionVS,!0)},move:function(){e._pointerChangeV(r.startPointers[0],r.currentPointers[0])}});"ResizeObserver"in window&&this.container.current?new ResizeObserver(function(){return e._resetPosition()}).observe(this.container.current):window.addEventListener("resize",this._resetPosition),this._resetPosition()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resetPosition)}},{key:"_resetPosition",value:function(){var e=this;requestAnimationFrame(function(){if(e.container.current){var t=e.container.current.getBoundingClientRect();e._positionH=t.height*e._relativePositionH,e._positionHS=t.width*e._relativePositionHS,e._positionV=t.width*e._relativePositionV,e._positionVS=t.height*e._relativePositionVS,e._setHorizontal(),e._setHorizontalScrubber(),e._setVertical(),e._setVerticalScrubber()}})}},{key:"_pointerChangeH",value:function(e,t){var n=this.container.current.getBoundingClientRect();this._positionHS=this._positionOnPointerStartHS+(t.clientX-e.clientX),this._positionHS=Math.max(0,Math.min(this._positionHS,n.width-30)),this._relativePositionHS=this._positionHS/n.width,this._setHorizontalScrubber(),this._positionH=this._positionOnPointerStartH+(t.clientY-e.clientY),this._positionH=Math.max(0,Math.min(this._positionH,n.height)),this._relativePositionH=this._positionH/n.height,this._setHorizontal()}},{key:"_pointerChangeV",value:function(e,t){var n=this.container.current.getBoundingClientRect();this._positionVS=this._positionOnPointerStartVS+(t.clientY-e.clientY),this._positionVS=Math.max(0,Math.min(this._positionVS,n.height-30)),this._relativePositionVS=this._positionVS/n.height,this._setVerticalScrubber(),this._positionV=this._positionOnPointerStartV+(t.clientX-e.clientX),this._positionV=Math.max(0,Math.min(this._positionV,n.width)),this._relativePositionH=this._positionV/n.width,this._setVertical()}},{key:"render",value:function(){var e=r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-shangxiahuakuai"}));return r.a.createElement("div",{ref:this.container,className:"panel"},this.props.children,r.a.createElement("div",{className:"horizontal",ref:this.horizontal},r.a.createElement("div",{className:"scrubber",ref:this.scrubber1},e)),r.a.createElement("div",{className:"vertical",ref:this.vertical},r.a.createElement("div",{className:"scrubber",ref:this.scrubber2},e)))}}]),t}(r.a.Component)),B=(n(42),{attributes:!0,childList:!0,subtree:!0}),F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={posX:0,posY:0,left:0,top:0,scale:1,showMagnifier:!0},n._observer=new MutationObserver(function(e){var t=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;switch(s.type){case"attributes":if(n.canvas.current){var c=n.canvas.current.width,l=n.canvas.current.getBoundingClientRect(),u=l.left,h=void 0===u?0:u,p=l.top,d=void 0===p?0:p,m=l.width/c;n.setState({left:h,top:d,scale:m},function(){return n._drawMagnifier()})}console.log("The ".concat(s.attributeName," attribute was modified."))}}}catch(f){i=!0,r=f}finally{try{t||null==o.return||o.return()}finally{if(i)throw r}}}),n._drawMagnifier=function(){if(n.canvas.current&&n.magnifier.current){var e=n.state,t=e.posX,i=e.posY,r=e.left,a=e.top,o=e.scale;!function(e,t,n,i,r,a){var o=t.getContext("2d"),s=t.width,c=t.height;o.imageSmoothingEnabled=!1,o.mozImageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1,o.msImageSmoothingEnabled=!1,o.drawImage(e,n-r,i-a,10,10,0,0,s,c),o.beginPath(),o.strokeStyle="red",o.moveTo(s/2-5,c/2-5),o.lineTo(s/2+5,c/2-5),o.lineTo(s/2+5,c/2+5),o.lineTo(s/2-5,c/2+5),o.lineTo(s/2-5,c/2-5),o.stroke(),o.closePath()}(n.canvas.current,n.magnifier.current,Math.round((t-r)/o),Math.round((i-a)/o),4.5,4.5);var s=function(e){var t=e.getContext("2d").getImageData(e.width/2,e.height/2,1,1).data;return[t[0],t[1],t[2],t[3]/255]}(n.magnifier.current);n.props.onResult(s)}},n._toggleMagnifier=function(){n.setState({showMagnifier:!n.state.showMagnifier})},n.canvas=Object(i.createRef)(),n.magnifier=Object(i.createRef)(),n.magnifierGrid=Object(i.createRef)(),n.pinchZoomPan=Object(i.createRef)(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.getDrawable();this.canvas.current&&e&&k(this.canvas.current,e)}},{key:"componentDidUpdate",value:function(e,t){var n=this.getDrawable(e),i=this.getDrawable();i&&i!==n&&this.canvas.current&&(k(this.canvas.current,i),this._observer.observe(this.canvas.current,B))}},{key:"componentWillUnmount",value:function(){this._observer.disconnect()}},{key:"getDrawable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.source&&e.source.decoded}},{key:"render",value:function(){var e=this,t=this.getDrawable();if(!t)return null;var n=this.state.showMagnifier,i=r.a.createElement("div",{className:"side-bar"},r.a.createElement("button",{className:"item scale-btn"},Math.round(100*this.state.scale)),r.a.createElement("button",{className:"item scale-btn active",onClick:this._toggleMagnifier},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-radar"}))));return r.a.createElement("div",{className:"panel-wrapper"},r.a.createElement("button",{className:"back-btn btn",onClick:this.props.onBack},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-back"}))),i,r.a.createElement(z,{setX:function(t){return e.setState({posX:t},function(){return e._drawMagnifier()})},setY:function(t){return e.setState({posY:t},function(){return e._drawMagnifier()})}},r.a.createElement(D.a,{position:"center",zoomButtons:!1,ref:this.pinchZoomPan},r.a.createElement("canvas",{ref:this.canvas,width:t.width,height:t.height}))),r.a.createElement("div",{className:"magnifier ".concat(n?"":"hidden")},r.a.createElement("canvas",{ref:this.magnifier,width:110,height:110})))}}]),t}(r.a.Component);n(43);var L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={expand:!1},n._toggleExpand=function(){n.setState({expand:!n.state.expand})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"copyContent",value:function(e){x(e)&&alert("copy success")}},{key:"render",value:function(){var e=this,t=this.props.rgba,n=void 0===t?[]:t,i=this.state.expand;if(n.length<1)return null;var a,o,s,c="rgb (".concat(n[0],", ").concat(n[1],", ").concat(n[2],")"),l=function(e,t,n){e/=255,t/=255,n/=255;var i=Math.min(e,t,n),r=Math.max(e,t,n),a=r-i,o=0,s=0;return o=0===a?0:r===e?(t-n)/a%6:r===t?(n-e)/a+2:(e-t)/a+4,(o=Math.round(60*o))<0&&(o+=360),s=(r+i)/2,"hsl ("+o+", "+ +(100*(0===a?0:a/(1-Math.abs(2*s-1)))).toFixed(1)+"%, "+(s=+(100*s).toFixed(1))+"%)"}(n[0],n[1],n[2]),u=(a=n[0],o=n[1],s=n[2],a=a.toString(16),o=o.toString(16),s=s.toString(16),1===a.length&&(a="0"+a),1===o.length&&(o="0"+o),1===s.length&&(s="0"+s),"#"+a+o+s),h=i?"active":"";return r.a.createElement("div",{className:"result"},r.a.createElement("div",{className:"result-main ".concat(h)},r.a.createElement("div",{className:"color-item",onClick:function(){return e.copyContent(u)}},u,r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-copy"}))),r.a.createElement("div",{className:"color-item",onClick:function(){return e.copyContent(l)}},l,r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-copy"})))),r.a.createElement("div",{className:"result-bar"},r.a.createElement("div",{className:"expand-btn ".concat(h),onClick:this._toggleExpand},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-up"}))),r.a.createElement("div",{className:"preview-area",onClick:function(){return e.copyContent(c)}},c,r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-copy"})))))}}]),t}(r.a.Component),U=(n(44),document.title);function X(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(y.a)(w.a.mark(function e(t){var n,i,r,a,o,s,c,l;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new DOMParser,e.next=3,H(t);case 3:if(i=e.sent,r=n.parseFromString(i,"image/svg+xml"),!(a=r.documentElement).hasAttribute("width")||!a.hasAttribute("height")){e.next=8;break}return e.abrupt("return",C(t));case 8:if(null!==(o=a.getAttribute("viewBox"))){e.next=11;break}throw Error("SVG must have width/height or viewBox");case 11:return s=o.split(/\s+/),a.setAttribute("width",s[2]),a.setAttribute("height",s[3]),c=new XMLSerializer,l=c.serializeToString(r),e.abrupt("return",C(new Blob([l],{type:"image/svg+xml"})));case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}var A=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).widthQuery=window.matchMedia("(max-width: 599px)"),n.state={source:{},mobileView:n.widthQuery.matches,result:[]},n._onMobileWidthChange=function(){n.setState({mobileView:n.widthQuery.matches})},n._updateFile=function(){var e=Object(y.a)(w.a.mark(function e(t){var i,r,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({loading:!0}),e.prev=1,!t.type.startsWith("image/svg+xml")){e.next=9;break}return e.next=5,X(t);case 5:r=e.sent,i=V(r),e.next=12;break;case 9:return e.next=11,M(t);case 11:i=e.sent;case 12:n.updateDocumentTitle(t.name),a=Object(_.a)({},n.state,{source:{decoded:i,file:t},loading:!1}),n.setState(a),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0),alert("Invalid image"),n.setState({loading:!1});case 22:case"end":return e.stop()}},e,null,[[1,17]])}));return function(t){return e.apply(this,arguments)}}(),n._updateFile(e.file),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.widthQuery.addListener(this._onMobileWidthChange)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.file!==this.props.file&&this.updateFile(e.file)}},{key:"updateDocumentTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";document.title=e?"".concat(e," - ").concat(U):U}},{key:"render",value:function(){var e=this,t=this.state,n=t.source,i=t.mobileView;return r.a.createElement("div",{className:"pick"},r.a.createElement(F,{source:n,mobileView:i,onBack:this.props.onBack,onResult:function(t){return e.setState({result:t})}}),r.a.createElement(L,{rgba:this.state.result}))}}]),t}(r.a.Component),T=(n(45),window.location),W="/editor";function Q(){window.history.back()}var G=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={isEditorOpen:!1,file:void 0},e._handleDrop=function(t,n){if(t&&0!==t.length){var i=t[0];/image/.test(i.type)?(e.openEditor(),e.setState({file:i})):console.log("invalid image")}},e._onPickeLocalFile=function(t){/image/.test(t.type)?(e.openEditor(),e.setState({file:t})):console.log("invalid image")},e.onPopState=function(){e.setState({isEditorOpen:T.pathname===W})},document.body.addEventListener("gesturestart",function(e){e.preventDefault()}),window.addEventListener("popstate",e.onPopState),e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"openEditor",value:function(){if(!this.state.isEditorOpen){var e=new URL(T.href);e.pathname=W,window.history.pushState(null,"",e.href),this.setState({isEditorOpen:!0})}}},{key:"render",value:function(){return r.a.createElement(p.a,{onDrop:this._handleDrop},this.state.isEditorOpen?r.a.createElement(A,{file:this.state.file,onBack:Q}):r.a.createElement(g,{onFile:this._onPickeLocalFile}))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.f2760f02.chunk.js.map